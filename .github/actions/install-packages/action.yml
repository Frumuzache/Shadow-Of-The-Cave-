name: 'Install packages'
description: 'Install required packages for building the project'

runs:
  using: "composite"
  steps:
    # -------------------------
    # üêß Linux Dependencies
    # -------------------------
    - name: Install Linux Dependencies
      if: runner.os == 'Linux'
      # This 'uses' points to the file we fixed in our previous conversation
      uses: ./.github/actions/install-linux-deps

    - name: Install valgrind
      shell: bash
      if: runner.os == 'Linux' && matrix.runs_valgrind == true
      run: |
        sudo apt-get update
        sudo apt-get install -y --no-install-recommends valgrind

    # -------------------------
    # üçè macOS Dependencies
    # -------------------------
    - name: Install macOS Dependencies
      shell: bash
      if: runner.os == 'macOS'
      run: |
        set -eux
        brew update
        brew install sfml ninja

    # -------------------------
    # ü™ü Windows Dependencies
    # -------------------------
    - name: Install Windows Dependencies
      shell: bash
      if: runner.os == 'Windows'
      run: |
        # --- THIS IS THE FIX ---
        # The package is 'sfml-vc17' for Visual Studio 2022, not 'sfml'
        choco install sfml-vc17 ninja
